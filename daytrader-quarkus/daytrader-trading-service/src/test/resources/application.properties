# ===========================================
# Test Configuration
# ===========================================
quarkus.test.integration-test-profile=test

# ===========================================
# PostgreSQL Testcontainers
# ===========================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.devservices.enabled=true
quarkus.datasource.devservices.image-name=postgres:15-alpine

# ===========================================
# Hibernate ORM for Tests
# ===========================================
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# ===========================================
# Flyway for Tests - Disabled (using Hibernate schema generation)
# ===========================================
quarkus.flyway.migrate-at-start=false

# ===========================================
# JWT Configuration for Tests
# ===========================================
mp.jwt.verify.issuer=https://daytrader.example.com
smallrye.jwt.sign.key.location=privateKey-pkcs8.pem
smallrye.jwt.verify.key.location=publicKey.pem
mp.jwt.verify.audiences=daytrader-api
smallrye.jwt.new-token.lifespan=3600
smallrye.jwt.new-token.issuer=https://daytrader.example.com

# ===========================================
# Messaging Configuration for Tests (In-Memory)
# ===========================================
# Connect orders-out to orders-in using in-memory connector
mp.messaging.outgoing.orders-out.connector=smallrye-in-memory
mp.messaging.incoming.orders-in.connector=smallrye-in-memory

# ===========================================
# Logging for Tests
# ===========================================
quarkus.log.console.level=INFO
quarkus.log.category."com.daytrader".level=DEBUG
quarkus.log.category."org.hibernate.SQL".level=DEBUG

# ===========================================
# Disable observability in tests
# ===========================================
quarkus.otel.sdk.disabled=true
quarkus.micrometer.enabled=false

# ===========================================
# ByteBuddy experimental support for Java 25
# ===========================================
quarkus.test.arg-line=-Dnet.bytebuddy.experimental=true

