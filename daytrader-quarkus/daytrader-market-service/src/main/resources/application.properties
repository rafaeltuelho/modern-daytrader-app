# Application Configuration
quarkus.application.name=daytrader-market-service
quarkus.http.port=8082

# Database Configuration
quarkus.datasource.db-kind=postgresql
# Dev mode - uses Dev Services (Testcontainers) for PostgreSQL
%dev.quarkus.datasource.devservices.enabled=true
%dev.quarkus.datasource.devservices.image-name=postgres:16-alpine
%dev.quarkus.datasource.devservices.db-name=daytrader_market
# Production configuration
%prod.quarkus.datasource.username=daytrader
%prod.quarkus.datasource.password=daytrader
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/daytrader_market

# Hibernate Configuration
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=1.0.0

# OpenAPI Configuration
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# ===========================================
# Messaging Configuration (In-Memory by default)
# ===========================================
# The quotes-out channel is producer-only (no consumer in Market Service).
# For internal channels without a consumer, we need to disable validation.
# See ADR-002 for rationale and future Kafka migration path.
#
# Disable strict validation for orphan channels (producer-only channels are allowed)
quarkus.messaging.strict=false

# ===========================================
# Kafka Configuration (activate with -Dquarkus.profile=kafka)
# ===========================================
# To enable Kafka:
# 1. Add quarkus-messaging-kafka dependency
# 2. Run with: mvn quarkus:dev -Dquarkus.profile=kafka
#
# %kafka.kafka.bootstrap.servers=localhost:19092
# %kafka.mp.messaging.outgoing.quotes-out.connector=smallrye-kafka
# %kafka.mp.messaging.outgoing.quotes-out.topic=quotes
# %kafka.mp.messaging.outgoing.quotes-out.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Observability - Metrics
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/metrics

# Observability - Tracing
quarkus.otel.exporter.otlp.traces.endpoint=http://localhost:4317

# Health Checks
quarkus.smallrye-health.root-path=/health

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.daytrader".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

